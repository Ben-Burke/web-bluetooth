<script>

function processArrays(oldArray, newArray, index) {
    // console.log('Processing arrays');
    if ( index <= 7 ) {
        resultsArraysArray[0] = newArray[i-7];
        resultsArraysArray[1] = newArray[i-6];
        resultsArraysArray[2] = newArray[i-5];
        resultsArraysArray[3] = newArray[i-4];
        resultsArraysArray[4] = newArray[i-3];
        resultsArraysArray[5] = newArray[i-2];
        endOfData = true;
      } else {
      // if the index is greater than 7, then we need to read the tail end of the oldArray
        for ( j = 7; j > 0; j-- ) {
          resultsArraysArray[j] = oldArray[oldArray.byteLength - j];
          endOfData = true;
        }
  
      }
    }
  
  
  
    function walkDataview(newArray) {
        console.log('Walking dataview');
                for (let i = 0; i < newArray.byteLength; i++) {
                    if (newArray[i] == 0xE9) {
                        console.log('Found start of data at index ' + i)
                        console.log(new Uint8Array(newArray.buffer))
                        // find if bit 6 is set in newArray[i+1]
                        if (newArray[i+1] & 0x40) {
                            console.log('Bit 6 is set')
                            console.log('Data is ' + newArray[i+1])
                            console.log('HURRRRRRRRAY' + newArray[i+1])
                            processArrays(PreviousResultArray, newArray, i);
                            
                        } else {
                        
                            console.log('Bit 6 is not set')
                            console.log('Data is ' + newArray[i+1])
                        
                        }
                    }
                }
    }
                    
</script>